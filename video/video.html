<html>
    <body style="background:black">
        <video controls autoplay id="video" width="100%" height="95%"  style="margin-top:0px;">
            <source src="file:///Users/ahui/Downloads/hx.mp4" type="video/mp4" />
        </video>
        <br>
        <input onchange="play()" id="src" value="file:///Users/hilojack/Downloads/kbj.mp4">
        <input id="speed" value="2" onchange="v.playbackRate=(this.value)">
        <button type="button" onclick="play()"> play</button>
        <button type="button" onclick="v.pause()"> pause</button>
        <span id="info" style="color:red"></span>
    </body>

    <script>
        var $ = document.querySelector.bind(document)
v = $('#video')
info = $('#info')
function play(){
    console.log('play')
    v.src = $('#src').value
    v.load()
    v.playbackRate = $('#speed').value||2;
    v.play();
    //v.pause();
    //v.load();
    //document.querySelector('video').defaultPlaybackRate = 2.0;
}

const onkeydown=e=>{
    console.log(e.key,e.code,e)
    //e.preventDefault()
    if(e.key==='ArrowUp'){
        if(v.playbackRate<1.99){
            v.playbackRate +=0.2
        }else if(v.playbackRate<16){
            v.playbackRate =Math.round(v.playbackRate *2)
        }
    }

    if(e.code==="ArrowDown"){
        if(v.playbackRate <=1.01) {
            v.playbackRate =1
        }else if (v.playbackRate<2.01){
            v.playbackRate -=.2
        }else {
            v.playbackRate /=2
        }
    }
    if(e.key==='ArrowRight'){
        if(!e.repeat ) v.currentTime -= 80
        v.currentTime += 5*v.playbackRate
        e.preventDefault()
    }
    if(e.key==='ArrowLeft'){
        if(!e.repeat) {
           v.currentTime += Math.min(v.currentTime, 80)
        }
        console.log(5*v.playbackRate)
        v.currentTime -= 5*v.playbackRate
        e.preventDefault()
    }
    if(e.code==='Space' ){
        //v.playbackRate =1
    }
    info.innerText = ''+v.playbackRate
}
v.addEventListener('keydown', onkeydown, false)
//window.addEventListener('keyup', onkeydown, false)

    </script>
</html>
